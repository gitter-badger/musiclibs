{% load staticfiles %}{% load to_json %}<!DOCTYPE html>
<html>
<head>
    {# TODO: Specialize title #}
    <title>Misirlou</title>

    {# Temp styles #}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

    {% if not JSPM_USE_UNBUNDLED %}
    <link rel="stylesheet" href="{% static 'js/bundle/main.css' %}">
    {% endif %}
</head>
<body>
    <noscript>
        <div class="container">
            <div class="alert alert-danger">
                This site requires <a href="http://www.enable-javascript.com/" target="_blank">JavaScript</a> to function.
            </div>
        </div>
    </noscript>

    <div id="content-root"></div>

    <script id="initial-data" type="application/json">{{ view_data | to_json }}</script>

    {% if JSPM_USE_UNBUNDLED %}
    <script src="{% static 'js/packages/system.js' %}"></script>
    <script src="{% static 'js/config.js' %}"></script>
    <script>
        (function ()
        {
            var loadStatus = document.createElement('div');
            loadStatus.classList.add('alert', 'alert-info');
            loadStatus.innerHTML = '<strong>Loading Misirlou in unbundled development mode</strong>';

            document.body.appendChild(loadStatus, document.body.firstChild);

            System.import('index').then(
                function onSuccess()
                {
                    loadStatus.parentNode.removeChild(loadStatus);
                },
                function onError(e)
                {
                    loadStatus.classList.remove('alert-info');
                    loadStatus.classList.add('alert-danger');

                    var message = document.createElement('pre');
                    message.textContent = e;
                    loadStatus.appendChild(message);

                    console.error(e);
                }
            );
        })();
    </script>
    {% else %}
    <script src="{% static 'js/bundle/main.js' %}"></script>
    {% endif %}
</body>
</html>
